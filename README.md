Представлен вариант реализации веб-приложения для работы с заказами. Приложение было разработано по микросервисной архитектуре, состоящее из десяти микросервисов. Для приложения был организована централизованная защита и дискреционное разграничение доступа с помощью Spring Security.
Веб-приложение построено по микросервисной архитектуре и состоит из 10
микросервисов. Каждый микросервис реализует подход «чистая архитектура» и
состоит из 4 архитектурных слоев: доменный слой, слой репозиториев, сервисный
слой и слой контроллеров. Структурно внутри веб-приложения выделяются: сервис
управления услугами, сервис управления заказами и сервис управления
пользователями. Веб-приложения реализованы по паттерну Model-View-Controller
(MVC) средствами Spring Cloud MVC. Веб-интерфейсы сервисов расположены на
разных портах, отличных от стандартного HTTP-порта. На рисунке представлена
диаграмма компонентов веб-приложения.

![component-diagramm](https://github.com/user-attachments/assets/5a30d551-83ff-4c0e-8076-ea15ceb3aa48)

Подробнее о микросервисах:

**1. Order-storage** – микросервис для хранения информации о заказах и о
настройках стоимости расчета заказа. Микросервис предоставляет сторонним
клиентам информацию о заказах и настройках стоимости расчета хранящуюся в БД
средствами REST API. Диаграмма компонентов приведена на рисунке ниже.

![order-storage_comp](https://github.com/user-attachments/assets/a657c9ba-a17c-479a-bdf6-7137165ff356)
**2.  Service-list** – микросервис для хранения информации о предоставляемых
услугах. Микросервис предоставляет сторонним клиентам информацию об услугах
и хранящуюся в БД средствами REST API.

![service-list_comp](https://github.com/user-attachments/assets/26608b90-01fb-46cc-854b-e0fa3ce0faa4)
**3. Resource-server** – микросервис для реализации хранилища изображений.
Предоставляет REST API для выполнения операций загрузки, выгрузки и удаления
изображений из локального файлового хранилища. Изображения преобразуются в
массив байт с использованием кодировщика Base64 и отправляются клиентам через
HTTP-протокол в теле ответа.

![resource-server_comp](https://github.com/user-attachments/assets/97ee423a-1664-486d-974d-2b7477052d5c)
**4. Orders-handler** – микросервис реализующий сервис управления заказами.
Микросервис взаимодействует с order-storage для получения информации о заказах
и настройках стоимости расчета и предоставляет конечному пользователю веб-интерфейс для реализации CRUD-операций с заказами и настройками стоимости
расчета.

![order-handler_comp](https://github.com/user-attachments/assets/6a42d769-77c4-47ef-bc28-0da891c5bf59)
**5. Service-handler** – микросервис взаимодействует с микросервисом service-list для
получения информации об услугах и предоставляет конечному пользователю веб-
интерфейс для реализации CRUD-операций с услугами.

![service-handler_comp](https://github.com/user-attachments/assets/13c89a84-d09d-4c28-939f-1b0f2a87e6c9)
**6. Payment-app** – микросервис для управления платежами и транзакциями. Он
предоставляет функциональность для проведения транзакций между счетами, отката
транзакций и получения информации о счетах.

![payment-app_comp](https://github.com/user-attachments/assets/19d799b2-aec6-4b31-a092-e8108f0ba126)
**7. API-gateway** – шлюз API, который используется для маршрутизации запросов
между микросервисами в распределенной системе и реализован с использованием
Spring Cloud Gateway.

**8. User-gateway** – шлюз для конечных пользователей, используется для
маршрутизации клиента между внешними микросервисами (orders-handler и service-
handler). Также шлюз используется как единая точка входа в веб-приложение для
конечных пользователей и предоставляет домашнюю страницу с ссылками для
перехода на другие внешние микросервисы.
Исходя из того, что шлюз является единой точкой входа в веб-приложение,
было принято решение организовать защиту приложения и дискреционное
разграничение
доступа
на
шлюзе.
Защита
приложения
реализована
использованием модуля Spring Security для защиты реактивных веб-приложений.
Так как на пользовательском шлюзе реализована централизованная защита
приложения, шлюз используется как сервис управления пользователями и ролями.
Сервис
управления
пользователями
реализован
в
парадигме
реактивного
программирования в силу использования Webflux для управления шлюзом.
Сервис
управления
пользователями
реализует
CRUD-операции
с
сущностями пользователя (User) и роли (Role). Стоит отметить, что создание
пользователя доступно через механизм регистрации. Одновременно сервис
управления пользователями предоставляет веб-интерфейс для редактирования
ролей и пользователей.
![user-gateway_comp](https://github.com/user-attachments/assets/aab9bff2-f570-4ce3-aa72-80756bda2320)

Дополнительная информация о проекте приведена в выпускной квалификационной работе (прикреплена к репозиторию).
